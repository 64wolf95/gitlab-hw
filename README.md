# Домашнее задание к занятию "`Репликация и масштабирование. Часть 2`" - `Тесаев Максим`

### Инструкция по выполнению домашнего задания

   1. Сделайте `fork` данного репозитория к себе в Github и переименуйте его по названию или номеру занятия, например, https://github.com/имя-вашего-репозитория/git-hw или  https://github.com/имя-вашего-репозитория/7-1-ansible-hw).
   2. Выполните клонирование данного репозитория к себе на ПК с помощью команды `git clone`.
   3. Выполните домашнее задание и заполните у себя локально этот файл README.md:
      - впишите вверху название занятия и вашу фамилию и имя
      - в каждом задании добавьте решение в требуемом виде (текст/код/скриншоты/ссылка)
      - для корректного добавления скриншотов воспользуйтесь [инструкцией "Как вставить скриншот в шаблон с решением](https://github.com/netology-code/sys-pattern-homework/blob/main/screen-instruction.md)
      - при оформлении используйте возможности языка разметки md (коротко об этом можно посмотреть в [инструкции  по MarkDown](https://github.com/netology-code/sys-pattern-homework/blob/main/md-instruction.md))
   4. После завершения работы над домашним заданием сделайте коммит (`git commit -m "comment"`) и отправьте его на Github (`git push origin`);
   5. Для проверки домашнего задания преподавателем в личном кабинете прикрепите и отправьте ссылку на решение в виде md-файла в вашем Github.
   6. Любые вопросы по выполнению заданий спрашивайте в чате учебной группы и/или в разделе “Вопросы по заданию” в личном кабинете.
   
Желаем успехов в выполнении домашнего задания!
   
### Дополнительные материалы, которые могут быть полезны для выполнения задания

1. [Руководство по оформлению Markdown файлов](https://gist.github.com/Jekins/2bf2d0638163f1294637#Code)

---

### Задание 1

Опишите основные преимущества использования масштабирования методами:  
* активный master-сервер и пассивный репликационный slave-сервер;
* master-сервер и несколько slave-серверов.  
*Дайте ответ в свободной форме.*  

### Решение

Основные преимущества использования методов масштабирования:  
1. Активный главный сервер и пассивный реплицируемый подчинённый сервер (master-slave, пассивная репликация)
* Повышение отказоустойчивости. Если главный сервер выходит из строя, можно быстро переключиться на подчинённый и восстановить работу без потери данных.
* Защита данных. Реплика служит резервной копией — данные сохраняются на другом сервере и могут быть восстановлены при сбое.
* Безопасное обслуживание. Можно выполнять обновления или технические работы на основном сервере, зная, что данные сохранены на реплике.
2. Главный сервер и несколько подчинённых серверов (master-multiple-slaves)
* Масштабирование чтения. Запросы на чтение можно распределить между подчинёнными серверами, снижая нагрузку на главный сервер.
* Быстродействие системы. Основной сервер сосредоточен на операциях записи, а подчинённые — на чтении, что улучшает общую производительность.
* Отказоустойчивость и балансировка. При отказе одного подчинённого запросы можно перенаправить на другие, обеспечивая стабильную работу системы.
* Гибкость масштабирования. При росте нагрузки можно просто добавить новые подчинённые серверы без изменения архитектуры.

---

### Задание 2

Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:  
* пользователи,
* книги,
* магазины (столбцы произвольно).
Опишите принципы построения системы и их разграничение или разбивку между базами данных.  
*Пришлите блоксхему, где и что будет располагаться. Опишите, в каких режимах будут работать сервера.*

### Решение

План горизонтального и вертикального разделения базы данных  
1. Принципы разделения
**Вертикальное разделение (по столбцам)**  
Разделение таблицы на части, содержащие разные группы столбцов.  
Используется для повышения производительности и безопасности.  
* Таблица *пользователи*
Разделяется на:
 * user_auth — логин, пароль, роль (хранится на сервере авторизации, ограниченный доступ).
 * user_profile — имя, почта, дата регистрации, и т.п. (хранится на основном сервере приложений).
* Таблица *книги*
Разделяется на:
 * book_info — название, автор, год, жанр.
 * book_sales — цена, количество проданных копий, рейтинг (может храниться отдельно для аналитики).
**Горизонтальное разделение (по строкам)**
Разделение данных по значениям — например, по регионам или типам магазинов.  
* Таблица *магазины*
Разделяется по географическому признаку:
 * stores_east — магазины восточного региона.
 * stores_west — магазины западного региона.
Это снижает нагрузку на один сервер и ускоряет запросы, выполняемые в пределах региона.
2. Принципы построения системы
* Используются три базы данных:
 1. DB_Auth — хранит аутентификационные данные пользователей (user_auth).
 2. DB_Main — хранит общие данные приложения: профили пользователей, книги (user_profile, book_info).
 3. DB_Analytics — хранит статистику и продажи (book_sales, отчёты по магазинам).
* Горизонтальное шардирование по регионам для таблицы *магазины*.
* Между базами данных настроена репликация:
 * DB_Main — главный сервер (master).
 * DB_Auth и DB_Analytics — подчинённые (slave), синхронизируются с главной базой.
3. Режимы работы серверов
* DB_Main - Master (активный) - Основные операции записи и обновления данных.
* DB_Auth - Slave (реплика) - Только чтение данных пользователей, резервная копия для безопасности.
* DB_Analytics - Slave (реплика) - Только чтение, используется для аналитических запросов и отчётов.
* DB_Stores_East/West - Master (региональные) - Хранят данные магазинов, работают независимо, обмениваются результатами через API или ETL.

---

![screenshot](screenshots/2.1.png)

